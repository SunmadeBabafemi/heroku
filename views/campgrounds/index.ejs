<% layout('layouts/boilerplate') %>
<div id="cluster-map"></div> 
<h1>All campgrounds</h1>
<% const rows = new Array(1); %> 
<div class="container">
    <% for (let row of rows) {%>
        <div class="row">
            <% for (let campground of campgrounds) {%>
                    <div class="col-sm">
                        <div class="card my-3" style="width: 18rem;">
                            <div class="card-body">   
                              <div class="embed-responsive embed-responsive-16by9">
                                <%if (campground.images.length) {%> 
                                  <img src="<%= campground.images[0].url %>" class="card-img-top img-fluid embed-responsive-item" alt="Card image cap" crossorigin="">
                                <% } else {%> 
                                    <img src="" class="card-img-top img-fluid embed-responsive-item" alt="Card image cap">
                                <% } %> 
                                </div>
                             
                              <h5 class="card-title"><%= campground.title %></h5>
                              <h6 class="card-subtitle mb-2 text-muted"><%= campground.location %></h6>
                              <a href="campgrounds/<%=campground._id%>">Go to</a>
                            </div>
                        </div> 
                    </div>
            <% } %> 
        </div> 
    <% } %> 
</div>
<script nonce="r@nd0m">
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>'
    const campgrounds = {features: <%- JSON.stringify(campgrounds) %>}
</script>
<script  src="/javascripts/clusterMap.js"  ></script>